var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Util;!function(t){function e(t){return chance.integer({min:1,max:t})}function i(t){return chance.pick(t)}function n(t,e){return chance.weighted(t,e)}function s(t){var e=new Array;return t.forEach(function(t){e.push(t.weight)}),e}function a(t){return"<b>"+t+"</b>"}function o(t){var e=a(t.Name);return""!==t.description&&(e=e+": "+t.description),e}function r(t){if(0===t.length)return 0;if(1===t.length)return t[0];var e=0;return t.forEach(function(t){e+=t}),e}t.Roll=e,t.RandomFromArray=i,t.RandomFromWeightedArray=n,t.CreateWeightedArray=s,t.MakeBold=a,t.FormatChallenge=o,t.ArraySum=r}(Util||(Util={}));var Core;!function(t){function e(t){return chance.integer({min:1,max:t})}function i(t,e){return chance.integer({min:t,max:e})}t.Roll=e,t.RollMinMax=i;var n=function(){function t(t,e,i,n){this.Name=t,this.description=e,this.weight=i,this.hasSpecial=n}return t}();t.Challenge=n;var s=function(){function t(t){this.Name=t,this.SupportStartingItem=!0,this.Stats=new Array,this.Classes=new Array,this.Gifts=new Array,this.Challenges=new Array}return t.prototype.AddStat=function(t){-1===this.Stats.indexOf(t)&&this.Stats.push(t)},t.prototype.AddClass=function(t){-1===this.Classes.indexOf(t)&&this.Classes.push(t)},t.prototype.AddGift=function(t){-1===this.Gifts.indexOf(t)&&this.Gifts.push(t)},t.prototype.AddChallenge=function(t,e,i,s){this.Challenges.push(new n(t,e,i,s))},t.prototype.AddChallengeWithObject=function(t){this.Challenges.push(t)},t.prototype.GetRandomStart=function(){var t="Class: ";return t+=this.GetRandomClass(),this.SupportStartingItem&&(t+="</br>Gift: "+this.GetRandomGift()),t},t.prototype.GetRandomStat=function(){return Util.RandomFromArray(this.Stats)},t.prototype.GetRandomClass=function(){return Util.RandomFromArray(this.Classes)},t.prototype.GetRandomGift=function(){return Util.RandomFromArray(this.Gifts)},t.prototype.GetChallenge=function(){return Util.RandomFromWeightedArray(this.Challenges,Util.CreateWeightedArray(this.Challenges))},t}();t.SoulsGame=s}(Core||(Core={}));var collections;!function(t){function e(t,e){return t===e}function i(e){return null===e?"COLLECTION_NULL":t.isUndefined(e)?"COLLECTION_UNDEFINED":t.isString(e)?"$s"+e:"$o"+e.toString()}function n(t){return"undefined"==typeof t}function s(t){return"[object String]"===Object.prototype.toString.call(t)}var a=Object.prototype.hasOwnProperty,o=function(t,e){return a.call(t,e)};t.defaultEquals=e,t.defaultToString=i,t.isUndefined=n,t.isString=s;var r;!function(e){function i(e,i,n){for(var s=n||t.defaultEquals,a=e.length,o=0;a>o;o++)if(s(e[o],i))return o;return-1}function n(t,i,n){return e.indexOf(t,i,n)>=0}function s(t,i,n){var s=e.indexOf(t,i,n);return 0>s?!1:(t.splice(s,1),!0)}function a(e,i,n){var s=n||t.defaultEquals;if(e.length!==i.length)return!1;for(var a=e.length,o=0;a>o;o++)if(!s(e[o],i[o]))return!1;return!0}function o(t){return t.concat()}function r(t,e,i){if(0>e||e>=t.length||0>i||i>=t.length)return!1;var n=t[e];return t[e]=t[i],t[i]=n,!0}function l(t){return"["+t.toString()+"]"}function d(t,e){for(var i=t.length,n=0;i>n;n++)if(e(t[n])===!1)return}e.indexOf=i,e.contains=n,e.remove=s,e.equals=a,e.copy=o,e.swap=r,e.toString=l,e.forEach=d}(r=t.arrays||(t.arrays={}));var l=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||t.defaultToString}return e.prototype.getValue=function(e){var i=this.table["$"+this.toStr(e)];if(!t.isUndefined(i))return i.value},e.prototype.setValue=function(e,i){if(!t.isUndefined(e)&&!t.isUndefined(i)){var n,s="$"+this.toStr(e),a=this.table[s];return t.isUndefined(a)?(this.nElements++,n=void 0):n=a.value,this.table[s]={key:e,value:i},n}},e.prototype.remove=function(e){var i="$"+this.toStr(e),n=this.table[i];return t.isUndefined(n)?void 0:(delete this.table[i],this.nElements--,n.value)},e.prototype.keys=function(){var t=[];for(var e in this.table)if(o(this.table,e)){var i=this.table[e];t.push(i.key)}return t},e.prototype.values=function(){var t=[];for(var e in this.table)if(o(this.table,e)){var i=this.table[e];t.push(i.value)}return t},e.prototype.forEach=function(t){for(var e in this.table)if(o(this.table,e)){var i=this.table[e],n=t(i.key,i.value);if(n===!1)return}},e.prototype.containsKey=function(e){return!t.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var t="{";return this.forEach(function(e,i){t=t+"\n	"+e.toString()+" : "+i.toString()}),t+"\n}"},e}();t.Dictionary=l}(collections||(collections={}));var Games;!function(t){var e=function(t){function e(){t.call(this,"Dark Souls"),this.ImageName="dark-souls-1-logo.png",this.BackgroundName="dark-souls-1-bg.jpg",this.AddStat("Vitality"),this.AddStat("Attunement"),this.AddStat("Endurance"),this.AddStat("Strength"),this.AddStat("Dexterity"),this.AddStat("Resistance"),this.AddStat("Intelligence"),this.AddStat("Faith"),this.AddClass("Warrior"),this.AddClass("Knight"),this.AddClass("Wanderer"),this.AddClass("Thief"),this.AddClass("Bandit"),this.AddClass("Hunter"),this.AddClass("Sorcerer"),this.AddClass("Pyromancer"),this.AddClass("Cleric"),this.AddClass("Deprived"),this.AddGift("None"),this.AddGift("Goddess's Blessing"),this.AddGift("Black Firebomb"),this.AddGift("Twin Humanities"),this.AddGift("Binoculars"),this.AddGift("Pendant"),this.AddGift("Master Key"),this.AddGift("Tiny Being's Ring"),this.AddGift("Old Witch's Ring"),this.AddChallenge("Critical Miss","No estus or other healing items",50),this.AddChallenge("The Nudist","No Armor",100),this.AddChallenge("The Miser","Use only your starting equipment",100),this.AddChallenge("Well what is it !?","Must taunt the boss when the hp bar appears",100),this.AddChallenge("Best offence is a good defence","Only use a shield",100),this.AddChallenge("No Challenge","Yay! :D",100)}return __extends(e,t),e}(Core.SoulsGame);t.DarkSouls1=e}(Games||(Games={}));var Games;!function(t){var e=function(t){function e(){t.call(this,"Dark Souls 2"),this.ImageName="dark-souls-2-logo.png",this.BackgroundName="dark-souls-2-bg.jpg",this.AddStat("Vigor"),this.AddStat("Endurance"),this.AddStat("Vitality"),this.AddStat("Adaptibility"),this.AddStat("Strength"),this.AddStat("Dexterity"),this.AddStat("Intelligence"),this.AddStat("Faith"),this.AddStat("Attunement"),this.AddClass("Warrior"),this.AddClass("Knight"),this.AddClass("Swordsman"),this.AddClass("Bandit"),this.AddClass("Cleric"),this.AddClass("Sorcerer"),this.AddClass("Explorer"),this.AddClass("Deprived"),this.AddGift("None"),this.AddGift("Life Ring"),this.AddGift("Human Effigy"),this.AddGift("Healing Wares"),this.AddGift("Homeward Bone"),this.AddGift("Seed of a Tree of Giants"),this.AddGift("Bonfire Ascetic"),this.AddGift("Petrified Something"),this.AddChallenge("Critical Miss","No Estus, no (healing) items",50),this.AddChallenge("The Nudist","No armor",100),this.AddChallenge("The Miser","Only use your starting equipment",100),this.AddChallenge("Well what is it?!","Must taunt the boss when the hp bar appears",100),this.AddChallenge("Best offence is a good defence","Only use shield",100),this.AddChallenge("Use the force!","No HUD",100),this.AddChallenge("Queensbury rules","Fists only (Caestus is acceptable)",100),this.AddChallenge("Not the kitchen sink","Ladle Only!",100),this.AddChallenge("No Challenge","Yay :D",50);var e=new Core.Challenge("Fashion Souls","",100,!0);e.Special=function(){var t=Core.Roll(10),i=chance.pick(["up","down"]);e.description="Take the item in the slot "+t+" spaces "+i+"."},this.AddChallengeWithObject(e)}return __extends(e,t),e}(Core.SoulsGame);t.DarkSouls2=e}(Games||(Games={}));var Games;!function(t){var e=function(t){function e(){t.call(this,"Dark Souls 3"),this.ImageName="dark-souls-3-logo.png",this.BackgroundName="dark-souls-3-bg.jpg",this.AddStat("Vigor"),this.AddStat("Attunement"),this.AddStat("Endurance"),this.AddStat("Vitality"),this.AddStat("Strength"),this.AddStat("Dexterity"),this.AddStat("Intelligence"),this.AddStat("Faith"),this.AddStat("Luck"),this.AddClass("Knight"),this.AddClass("Mercenary"),this.AddClass("Warrior"),this.AddClass("Herald"),this.AddClass("Thief"),this.AddClass("Assasin"),this.AddClass("Sorcerer"),this.AddClass("Pyromancer"),this.AddClass("Cleric"),this.AddClass("Deprived"),this.AddGift("Life Ring"),this.AddGift("Divine Blessing"),this.AddGift("Hidden Blessing"),this.AddGift("Black Firebomb"),this.AddGift("Fire Gem"),this.AddGift("Sovereignless Soul"),this.AddGift("Rusted Gold Coin"),this.AddGift("Cracked Red Eye Orb"),this.AddGift("Young White Branch"),this.AddChallenge("Critical Miss","No Estus, no (healing) items",50),this.AddChallenge("The Nudist","No armor",100),this.AddChallenge("The Miser","Only use your starting equipment",100),this.AddChallenge("Well what is it?!","Must taunt the boss when the hp bar appears",100),this.AddChallenge("Shield Bash!","Only use shield",100),this.AddChallenge("Use the force!","No HUD",100),this.AddChallenge("Queensbury rules","Fists only (Caestus is acceptable)",100),this.AddChallenge("Which way is up?","Invert the Y axis",100),this.AddChallenge("What is this? Bloodborne?","1h weapon + crossbow in offhand",100),this.AddChallenge("No Challenge","Yay :D",50);var e=new Core.Challenge("Arithmomania","",100,!0);e.Special=function(){var t=Core.RollMinMax(400,900),i=Core.Roll(10),n=Util.RandomFromArray(["up","down"]);e.description="Count "+n+" by "+i+" starting from "+t},this.AddChallengeWithObject(e)}return __extends(e,t),e}(Core.SoulsGame);t.DarkSouls3=e}(Games||(Games={}));var Games;!function(t){var e=function(t){function e(){t.call(this,"Bloodborne"),this.ImageName="bloodborne-logo-2.png",this.BackgroundName="bloodborne-bg.jpg",this.SupportStartingItem=!1,this.AddStat("Strength"),this.AddStat("Vitality"),this.AddStat("Endurance"),this.AddStat("Skill"),this.AddStat("Arcane"),this.AddStat("Bloodtinge"),this.AddClass("Milquetoast"),this.AddClass("Lone Survivor"),this.AddClass("Troubled Childhood"),this.AddClass("Violent Past"),this.AddClass("Professional"),this.AddClass("Military Veteran"),this.AddClass("Noble Scion"),this.AddClass("Cruel Fate"),this.AddClass("Waste of Skin"),this.AddChallenge("Lygophobia","Fear of Darkness. Blindfolded player",50),this.AddChallenge("Hemophobia","Fear of Blood. No bloodvial usage allowed",100),this.AddChallenge("Isolophobia","Fear of Isolation. Each player controls half of the controller",100),this.AddChallenge("Tropophobia","Fear of Change. Only use starting equipment",100),this.AddChallenge("Hoplophobia","Fear of Firearms. Not allowed to use guns",100),this.AddChallenge("Musculomania","Obsession with Muscles. Must taunt boss when HP bar appears",100),this.AddChallenge("Vestiphobia","Fear of Clothing. Fight boss naked",100),this.AddChallenge("Cenophobia","Fear of new Things. Plank shield + 1h untransformed weapon only",100),this.AddChallenge("No Challenge","Sometimes, things go better then expected",100);var e=new Core.Challenge("Arithmomania","",100,!0);e.Special=function(){var t=Util.RandomFromArray(["up","down"]),i=Core.RollMinMax(100,999);e.description="Start counting "+t+" from "+i+"."},this.AddChallengeWithObject(e)}return __extends(e,t),e}(Core.SoulsGame);t.Bloodborne=e}(Games||(Games={}));var Output;!function(t){var e;!function(t){function e(t){$("#logMainDiv").show(500),$("#rollLog").append(t+"</br>")}function i(){$("#rollLog").empty(),$("#logMainDiv").hide(500)}t.WriteLine=e,t.ClearLog=i}(e=t.Log||(t.Log={}))}(Output||(Output={}));var Output;!function(t){var e;!function(t){function e(t,e){sweetAlert({title:t,text:e,type:"success",animation:"slide-from-top",html:!0})}function i(t,e){sweetAlert({title:t,text:e,type:"warning",animation:"slide-from-top",html:!0})}function n(t){t.hasSpecial===!0&&t.Special(null);var e={title:t.Name,text:t.description,type:"success",animation:"slide-from-top"};return sweetAlert(e),t}t.Show=e,t.ShowWarning=i,t.ShowChallengeAlert=n}(e=t.Alert||(t.Alert={}))}(Output||(Output={}));var _descriptionVisible,_displayExtraButtons=!1;$(document).ready(function(){function t(){return s.getValue($("#gameSelection").val())}function e(){a?($("#toggleDescription").html("Show Description"),a=!1,$("#introText").hide(500),store.set("preparetodice_description_visbility",!1)):($("#toggleDescription").html("Hide Description"),a=!0,$("#introText").show(500),store.set("preparetodice_description_visbility",!0))}function i(t){$("#toggleDescription").html("Show Description"),t===!0?$("#introText").hide(0):$("#introText").hide(500),a=!1}function n(){$("#toggleDescription").html("Hide Description"),$("#introText").show(500),a=!0}var s=new collections.Dictionary;s.setValue("darksouls1",new Games.DarkSouls1),s.setValue("darksouls2",new Games.DarkSouls2),s.setValue("darksouls3",new Games.DarkSouls3),s.setValue("bloodborne",new Games.Bloodborne);var a=store.get("preparetodice_description_visbility");a?n():i(!0),_displayExtraButtons===!1&&$("._extraButtons").hide(),store.enabled===!1&&Output.Alert.ShowWarning("Local Storage","Can't access local storage, maybe due to private browsing. Some stuff might not be saved"),$("#gameSelection").change(function(){Output.Log.ClearLog();var e=t();$("#gameImage").attr("src","images/"+e.ImageName),$("body").css("background-image","url('images/"+e.BackgroundName+"')")}),$("body").css("background-image","url('images/"+t().BackgroundName+"')"),$("#toggleDescription").click(function(){e()}),$("#clearLog").click(function(){Output.Log.ClearLog()}),$("#rollStart").click(function(){var e=t();Output.Alert.Show("Your starting situation",e.GetRandomStart())}),$("#rollStats").click(function(){var e=t(),i=Util.MakeBold(e.GetRandomStat());Output.Log.WriteLine("You have to level "+i),Output.Alert.Show("You have to level",i)}),$("#rollChallenge").click(function(){var e=t(),i=e.GetChallenge();Output.Alert.ShowChallengeAlert(i),Output.Log.WriteLine(Util.FormatChallenge(i))}),$("#rollD20").click(function(){sweetAlert({title:"Roll Dice",text:"Enter a #d# dice format. There is no error checking for format yet",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputValue:"1d20"},function(t){if(t===!1)return!1;if(""===t)return sweetAlert.showInputError("You need to write something!"),!1;var e=chance.rpg(t.toString()),i=e.toString();e.length>1&&(i+=" (Total: "+Util.ArraySum(e)+")"),sweetAlert("You rolled...",i,"success"),Output.Log.WriteLine("Rolled: "+i)})}),$("#checkChallengeButton").click(function(){var t=Core.Roll(20),e="You failed",i="Chop chop, try again";t>=18&&(e="No challenge!",i="Challenge removed!"),Output.Alert.Show(e,i)}),$("#viewAllChallengesButton").click(function(){var e=t().Challenges,i="";e.forEach(function(t){i+=t.Name+": "+t.description+"</br>"}),Output.Alert.Show("All challenges for "+t().Name,i)}),$("#showExtraButtons").click(function(){_displayExtraButtons?($("._extraButtons").hide(),$("#showExtraButtons").html("Show extra buttons"),_displayExtraButtons=!1):($("._extraButtons").show(),$("#showExtraButtons").html("Hide extra buttons"),_displayExtraButtons=!0)})});